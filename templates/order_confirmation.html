{% extends 'base.html' %}
{% load currency_filters %}

{% block title %}Order Confirmation - LazyShops{% endblock %}

{% block extra_css %}
<style>
    .confirmation-card {
        background: var(--card-bg);
        border-radius: 20px;
        padding: 3rem;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        text-align: center;
        max-width: 700px;
        margin: 3rem auto;
    }
    
    [data-bs-theme="dark"] .confirmation-card {
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    
    .success-icon {
        width: 100px;
        height: 100px;
        background: linear-gradient(135deg, #10b981, #059669);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 2rem;
        animation: scaleIn 0.5s ease;
    }
    
    @keyframes scaleIn {
        from {
            transform: scale(0);
        }
        to {
            transform: scale(1);
        }
    }
    
    .order-details {
        background: var(--bs-body-bg);
        padding: 1.5rem;
        border-radius: 15px;
        margin: 2rem 0;
    }
    
    [data-bs-theme="dark"] .order-details {
        background: #0f172a;
    }
</style>
{% endblock %}

{% block content %}
<div class="confirmation-card">
    <div class="success-icon">
        <i class="fas fa-check fa-3x text-white"></i>
    </div>
    
    <h1 class="mb-3 fw-bold">Order Confirmed!</h1>
    <p class="lead text-muted mb-4">Thank you for your purchase. Your order has been successfully placed.</p>
    
    <div class="order-details text-start">
        <div class="row mb-3">
            <div class="col-6">
                <small class="text-muted">Order Number:</small>
                <p class="mb-0 fw-bold">#{{ order.id }}</p>
            </div>
            <div class="col-6">
                <small class="text-muted">Order Date:</small>
                <p class="mb-0 fw-bold">{{ order.date|date:"M d, Y" }}</p>
            </div>
        </div>
        
        <div class="mb-3">
            <small class="text-muted">Delivery Address:</small>
            <p class="mb-0">{{ order.address }}</p>
        </div>
        
        <div class="mb-3">
            <small class="text-muted">Contact Number:</small>
            <p class="mb-0">{{ order.phone }}</p>
        </div>
        
        <div class="mb-3">
            <small class="text-muted">Order Status:</small>
            <p class="mb-0">
                <span class="badge bg-warning">{{ order.get_status_display }}</span>
            </p>
        </div>
        
        <hr>
        
        <h5 class="mb-3 fw-bold">Order Items:</h5>
        {% for item in order.items.all %}
        <div class="d-flex justify-content-between mb-2">
            <span>{{ item.product.name }} x {{ item.quantity }}</span>
            <strong>{{ item.price|rupees }}</strong>
        </div>
        {% endfor %}
        
        <hr>
        
        <div class="d-flex justify-content-between">
            <strong class="fs-5">Total Amount:</strong>
            <strong class="fs-4 text-primary">{{ order.total_price|rupees }}</strong>
        </div>
    </div>
    
    <div class="alert alert-info">
        <i class="fas fa-info-circle"></i>
        A confirmation email has been sent to your registered email address.
    </div>
    
    <div class="d-flex gap-3 justify-content-center mt-4">
        <a href="{% url 'order_history' %}" class="btn btn-primary">
            <i class="fas fa-box"></i> View All Orders
        </a>
        <a href="{% url 'home' %}" class="btn btn-outline-primary">
            <i class="fas fa-home"></i> Continue Shopping
        </a>
    </div>
</div>
{% endblock %}
